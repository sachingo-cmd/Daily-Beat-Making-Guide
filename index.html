<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Daily Beat-Making Guide</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
  body {
    margin: 0; 
    font-family: 'Poppins', sans-serif;
    background-color: #121212;
    color: #ddd;
    min-height: 100vh;
    padding: 1rem;
  }
  h1, h2, h3 {
    color: #ff7043;
    margin-bottom: 0.5rem;
  }
  header p {
    color: #bbb;
    font-style: italic;
    margin-top: -0.8rem;
    margin-bottom: 1.5rem;
  }
  label {
    display: block;
    font-weight: 600;
    color: #fea872;
    margin-bottom: 0.3rem;
  }
  select, textarea {
    width: 100%;
    border-radius: 6px;
    border: 1px solid #ff7043;
    background-color: #121212;
    padding: 0.5rem;
    color: #ddd;
    font-size: 1rem;
    resize: vertical;
  }
  section {
    background: #1e1e1e;
    border-radius: 8px;
    margin-bottom: 1.5rem;
    padding: 1rem 1.5rem;
    box-shadow: 0 2px 10px rgba(255, 112, 67, 0.15);
  }
  ul {
    list-style: none;
    padding-left: 0;
  }
  li {
    margin: 0.5rem 0;
  }
  input[type="checkbox"] {
    transform: scale(1.3);
    margin-right: 0.8rem;
    accent-color: #ff7043;
    cursor: pointer;
  }
  button {
    background-color: #2a2a2a;
    border: 1px solid #ffa366;
    border-radius: 6px;
    color: #ffd4b0;
    cursor: pointer;
    font-weight: 500;
    margin: 0.3rem 0.3rem 0.3rem 0;
    padding: 0.4rem 0.6rem;
    transition: background-color 0.3s;
    font-size: 0.9rem;
    outline-offset: 2px;
  }
  button:hover {
    background-color: #ff7043;
    color: #121212;
  }
  button.selected {
    background-color: #ff7043;
    color: #121212;
    border-color: #ff7f50;
    font-weight: 700;
  }
  footer {
    text-align: center;
    font-size: 0.85rem;
    margin-top: 2rem;
    color: #ff9b68;
    font-weight: 600;
  }
  .flex-row {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
  }
  .flex-column {
    flex: 1 1 250px;
  }
  .instrument-category {
    margin-bottom: 1rem;
  }
  .tooltip {
    position: relative;
    display: inline-block;
  }
  /* Tooltip text */
  .tooltip:hover::after {
    content: attr(data-tooltip);
    position: absolute;
    background-color: #333;
    color: #ffd4b0;
    padding: 5px 8px;
    border-radius: 4px;
    top: 130%; left: 50%;
    transform: translateX(-50%);
    white-space: nowrap;
    font-size: 0.85rem;
    z-index: 10;
  }
  @media (max-width: 600px){
    .flex-row {
      flex-direction: column;
    }
  }
</style>
</head>
<body>

<header>
  <h1>Daily Beat-Making Guide</h1>
  <p>Create. Groove. Vibe.</p>
</header>

<section>
  <div class="flex-row">
    <div class="flex-column">
      <label for="style-select">Select Music Style:</label>
      <select id="style-select" aria-label="Select Music Style"></select>
    </div>
    <div class="flex-column">
      <label for="mood-select">Select Mood/Vibe:</label>
      <select id="mood-select" aria-label="Select Mood"></select>
    </div>
  </div>
  <div id="style-info" style="margin-top:1rem; color:#ffa26b;"></div>
</section>

<section>
  <h2>Today's Beat-Making Tasks</h2>
  <ul id="task-list"></ul>
</section>

<section>
  <h2>Instrument Selection</h2>
  <div class="instrument-category" id="drum-category">
    <h3>Drums</h3>
    <div id="drums"></div>
  </div>
  <div class="instrument-category" id="bass-category">
    <h3>Bass</h3>
    <div id="bass"></div>
  </div>
  <div class="instrument-category" id="melodic-category">
    <h3>Melodic Elements</h3>
    <div id="melodic"></div>
  </div>
</section>

<section>
  <h2>Notes & Reflections</h2>
  <textarea id="notes-area" rows="6" placeholder="Write your session notes here..."></textarea>
</section>

<footer>
  <p>Â© 2025 Your Beat-Making Guide</p>
</footer>

<script>
// Data Objects
const musicStyles = {
  "Lo-Fi Hip-Hop": {
    bpmRange: "60 - 90",
    tips: "Relaxed, textured beats with simple drums & warm bass. Focus on groove & atmosphere.",
    maxElements: { drums: 5, bass: 1, melodic: 2 },
    drumSamples: ["Soft kick", "Lo-fi snare", "Closed hi-hat", "Open hi-hat", "Shaker"],
    bassSamples: ["Warm sub bass", "Synth bass"],
    melodicSamples: ["Electric piano", "Pluck synth", "Ambient pad", "Bell", "Guitar loop"]
  },
  "Trap-Influenced Hip-Hop": {
    bpmRange: "130 - 150",
    tips: "Punchy drums with heavy bass and minimal melodic elements. Use rhythmic trap kits.",
    maxElements: { drums: 5, bass: 1, melodic: 2 },
    drumSamples: ["Punchy kick", "Trap snare/clap", "Hi-hat rolls", "Percussive effects", "Trap cymbal"],
    bassSamples: ["808 sub bass", "Synth bass"],
    melodicSamples: ["Dark synth lead", "Pluck", "Ethnic sample", "Pad", "Bell"]
  },
  "Ambient/Melodic Hip-Hop": {
    bpmRange: "70 - 100",
    tips: "Atmospheric, emotional, with spacious beats and melodic vocals. Minimal drums with ambient textures.",
    maxElements: { drums: 4, bass: 1, melodic: 3 },
    drumSamples: ["Soft kick", "Light snare", "Percussion", "Brush hi-hat"],
    bassSamples: ["Warm bass", "Sub bass"],
    melodicSamples: ["Synth pad", "Electric piano", "Bell", "Guitar", "Vocal chops"]
  }
};

const moods = ["Chill", "Dark", "Melancholic", "Energetic", "Hopeful", "Introspective"];

const dailyTasks = [
  "Set vibe & BPM, select references",
  "Create drum groove (kick, snare, hats)",
  "Add bassline",
  "Add 1-2 melodic elements",
  "Arrange & add transitions",
  "Save beat idea & review"
];

// State persistence helpers (localStorage)
function saveToStorage(key, value) {
  localStorage.setItem(key, JSON.stringify(value));
}
function loadFromStorage(key, fallback) {
  let val = localStorage.getItem(key);
  if (val) return JSON.parse(val);
  return fallback;
}

// Current selected state
let selectedStyle = loadFromStorage('selectedStyle', 'Lo-Fi Hip-Hop');
let selectedMood = loadFromStorage('selectedMood', 'Chill');
let taskProgress = loadFromStorage('taskProgress', Array(dailyTasks.length).fill(false));
let selectedDrums = loadFromStorage('selectedDrums', []);
let selectedBass = loadFromStorage('selectedBass', []);
let selectedMelodic = loadFromStorage('selectedMelodic', []);
let notes = localStorage.getItem('notes') || "";

// HTML references
const styleSelect = document.getElementById('style-select');
const moodSelect = document.getElementById('mood-select');
const styleInfo = document.getElementById('style-info');
const taskList = document.getElementById('task-list');
const drumsDiv = document.getElementById('drums');
const bassDiv = document.getElementById('bass');
const melodicDiv = document.getElementById('melodic');
const notesArea = document.getElementById('notes-area');

// Instrument description tooltips
function instrumentDescription(category, item) {
  const descs = {
    drums: {
      "Soft kick": "Warm, soft bass kick for chill vibe.",
      "Lo-fi snare": "Subtle snare with vintage texture.",
      "Closed hi-hat": "Crisp hi-hat for rhythm.",
      "Open hi-hat": "Open hi-hat to add groove.",
      Shaker: "Shaker percussion for texture.",
      "Punchy kick": "Strong kick punch for trap energy.",
      "Trap snare/clap": "Sharp snare/clap common in trap.",
      "Hi-hat rolls": "Fast hi-hat rolls for trap groove.",
      "Percussive effects": "Sampled percussive sounds to add interest.",
      "Trap cymbal": "Crash cymbal for trap dynamics.",
      "Light snare": "Soft snare for ambient beats.",
      Percussion: "Additional percussion for movement.",
      "Brush hi-hat": "Gentle hi-hat for smooth groove."
    },
    bass: {
      "Warm sub bass": "Deep and warm bass for lo-fi base.",
      "Synth bass": "Smooth synth bass for melody support.",
      "808 sub bass": "Classic 808 bass with punch.",
      "Warm bass": "Deep, smooth bass for ambient.",
      "Sub bass": "Low frequency bass."
    },
    melodic: {
      "Electric piano": "Soft keys with warm tone, great for melody.",
      "Pluck synth": "Short, plucky synth melody lines.",
      "Ambient pad": "Sustained ambient sound for atmosphere.",
      Bell: "Light bell for sparkle.",
      "Guitar loop": "Short guitar riffs to add character.",
      "Dark synth lead": "Moody synth lead for trap.",
      Ethnic sample: "Sample with traditional ethnic sound.",
      Pad: "Background pad for fullness.",
      "Vocal chops": "Vocal samples chopped for texture.",
      Guitar: "Clean or distorted guitars for mood."
    }
  };
  return descs[category][item] || "";
}

// Utility for creating options
function createOption(value) {
  const opt = document.createElement('option');
  opt.value = value;
  opt.textContent = value;
  return opt;
}

// Populate style and mood selects
function populateSelectors() {
  for (const style of Object.keys(musicStyles)) {
    styleSelect.appendChild(createOption(style));
  }
  for (const mood of moods) {
    moodSelect.appendChild(createOption(mood));
  }
  styleSelect.value = selectedStyle;
  moodSelect.value = selectedMood;
}

// Render style info text
function renderStyleInfo() {
  const style = musicStyles[selectedStyle];
  styleInfo.innerHTML = `
    <p><strong>BPM Range:</strong> ${style.bpmRange}</p>
    <p><strong>Style Tips:</strong> ${style.tips}</p>
    <p><strong>Element Limits:</strong> Drums: ${style.maxElements.drums}, Bass: ${style.maxElements.bass}, Melodic: ${style.maxElements.melodic}</p>
  `;
}

// Render task checklist
function renderTasks() {
  taskList.innerHTML = '';
  dailyTasks.forEach((task, idx) => {
    const li = document.createElement('li');
    const checkbox = document.createElement('input');
    checkbox.type = 'checkbox';
    checkbox.id = `task-${idx}`;
    checkbox.checked = taskProgress[idx];
    checkbox.addEventListener('change', () => {
      taskProgress[idx] = checkbox.checked;
      saveToStorage('taskProgress', taskProgress);
    });
    const label = document.createElement('label');
    label.htmlFor = `task-${idx}`;
    label.textContent = task;
    li.appendChild(checkbox);
    li.appendChild(label);
    taskList.appendChild(li);
  });
}

// Render instruments selection buttons
function renderInstruments() {
  // Helper to create buttons in category div
  function renderCategory(div, category, items, selectedItems, maxLimit) {
    div.innerHTML = '';
    items.forEach(item => {
      const btn = document.createElement('button');
      btn.textContent = item;
      btn.className = selectedItems.includes(item) ? 'selected' : 'unselected';
      btn.setAttribute('data-tooltip', instrumentDescription(category, item));
      btn.classList.add("tooltip");
      btn.onclick = () => {
        if (selectedItems.includes(item)) {
          // Remove selection
          const index = selectedItems.indexOf(item);
          if (index > -1) selectedItems.splice(index, 1);
        } else {
          if (selectedItems.length >= maxLimit) {
            alert(`Maximum ${category} elements reached: ${maxLimit}. Deselect one to add another.`);
            return;
          }
          selectedItems.push(item);
        }
        saveSelections();
        renderInstruments();
      };
      div.appendChild(btn);
    });
  }
  const style = musicStyles[selectedStyle];
  renderCategory(drumsDiv, 'drums', style.drumSamples, selectedDrums, style.maxElements.drums);
  renderCategory(bassDiv, 'bass', style.bassSamples, selectedBass, style.maxElements.bass);
  renderCategory(melodicDiv, 'melodic', style.melodicSamples, selectedMelodic, style.maxElements.melodic);
}

// Save all selected instruments to localStorage
function saveSelections() {
  saveToStorage('selectedDrums', selectedDrums);
  saveToStorage('selectedBass', selectedBass);
  saveToStorage('selectedMelodic', selectedMelodic);
}

// Update selected style and reset selections if style changed
function onStyleChange(newStyle) {
  if (newStyle !== selectedStyle) {
    selectedStyle = newStyle;
    saveToStorage('selectedStyle', selectedStyle);
    // Reset selections
    selectedDrums = [];
    selectedBass = [];
    selectedMelodic = [];
    saveSelections();
    renderStyleInfo();
    renderInstruments();
  }
}

// Update mood selection
function onMoodChange(newMood) {
  selectedMood = newMood;
  saveToStorage('selectedMood', selectedMood);
}

// Update notes and save
function onNotesChange(text) {
  notes = text;
  localStorage.setItem('notes', notes);
}

// Initialize app UI
function init() {
  populateSelectors();
  renderStyleInfo();
  renderTasks();
  renderInstruments();
  notesArea.value = notes;

  // Event listeners
  styleSelect.addEventListener('change', e => onStyleChange(e.target.value));
  moodSelect.addEventListener('change', e => onMoodChange(e.target.value));
  notesArea.addEventListener('input', e => onNotesChange(e.target.value));
}

document.addEventListener('DOMContentLoaded', init);
</script>

</body>
</html>
